<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lot Calculator</title>
  <meta name="description" content="Calculate how many lots you can buy and your exit price based on investment amount, stock price, and loss tolerance." />
  <style>
    /* â”€â”€ Google Font â”€â”€ */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:        #0f1117;
      --surface:   #1a1d27;
      --surface2:  #21263a;
      --border:    #2e3348;
      --accent:    #6c63ff;
      --accent2:   #a78bfa;
      --green:     #34d399;
      --red:       #f87171;
      --yellow:    #fbbf24;
      --text:      #e4e6f0;
      --muted:     #8b90a8;
      --radius:    14px;
      --tr:        0.2s ease;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 24px 16px 48px;
    }

    /* â”€â”€ Header â”€â”€ */
    header {
      text-align: center;
      margin-bottom: 32px;
    }
    header h1 {
      font-size: clamp(1.6rem, 5vw, 2.4rem);
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.5px;
    }
    header p {
      color: var(--muted);
      font-size: 0.9rem;
      margin-top: 6px;
    }

    /* â”€â”€ Card â”€â”€ */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 24px;
      max-width: 680px;
      margin: 0 auto 28px;
    }

    /* â”€â”€ Form Grid â”€â”€ */
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    @media (max-width: 480px) {
      .form-grid { grid-template-columns: 1fr; }
    }

    .field { display: flex; flex-direction: column; gap: 6px; }
    .field.full { grid-column: 1 / -1; }

    label {
      font-size: 0.78rem;
      font-weight: 600;
      letter-spacing: 0.6px;
      text-transform: uppercase;
      color: var(--muted);
    }

    input[type="number"],
    input[type="text"] {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-family: inherit;
      font-size: 1rem;
      padding: 10px 14px;
      transition: border-color var(--tr), box-shadow var(--tr);
      width: 100%;
      -moz-appearance: textfield;
    }
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; }
    input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(108,99,255,.2);
    }
    input::placeholder { color: var(--muted); }

    /* â”€â”€ Lot toggles â”€â”€ */
    .lot-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 2px;
    }
    .lot-chip {
      display: flex;
      align-items: center;
      gap: 6px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 7px 14px;
      cursor: pointer;
      transition: border-color var(--tr), background var(--tr);
      user-select: none;
      font-size: 0.92rem;
      font-weight: 500;
    }
    .lot-chip input[type="checkbox"] {
      width: 15px; height: 15px;
      accent-color: var(--accent);
      cursor: pointer;
      flex-shrink: 0;
      padding: 0;
      border: none;
      background: none;
    }
    .lot-chip:has(input:checked) {
      border-color: var(--accent);
      background: rgba(108,99,255,.12);
      color: var(--accent2);
    }

    /* â”€â”€ Button â”€â”€ */
    .btn {
      width: 100%;
      padding: 13px;
      border: none;
      border-radius: 10px;
      font-family: inherit;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, var(--accent), #9b59f7);
      color: #fff;
      letter-spacing: 0.3px;
      transition: opacity var(--tr), transform var(--tr), box-shadow var(--tr);
      box-shadow: 0 4px 20px rgba(108,99,255,.35);
      margin-top: 4px;
    }
    .btn:hover  { opacity: .9; box-shadow: 0 6px 28px rgba(108,99,255,.5); }
    .btn:active { transform: scale(.98); }

    /* â”€â”€ Section title â”€â”€ */
    .section-title {
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 14px;
    }

    /* â”€â”€ Results â”€â”€ */
    #results { max-width: 680px; margin: 0 auto; }

    .results-table-wrap {
      overflow-x: auto;
      border-radius: var(--radius);
      border: 1px solid var(--border);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      min-width: 380px;
    }
    thead tr {
      background: var(--surface2);
    }
    th {
      padding: 12px 16px;
      text-align: left;
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 0.8px;
      text-transform: uppercase;
      color: var(--muted);
      border-bottom: 1px solid var(--border);
      white-space: nowrap;
    }
    td {
      padding: 12px 16px;
      border-bottom: 1px solid rgba(46,51,72,.5);
      color: var(--text);
    }
    tbody tr:last-child td { border-bottom: none; }
    tbody tr { transition: background var(--tr); }
    tbody tr:hover { background: rgba(108,99,255,.06); }

    .td-lot   { font-weight: 700; color: var(--accent2); }
    .td-qty   { font-weight: 600; }
    .td-cost  { color: var(--green);  font-weight: 500; }
    .td-loss  { color: var(--red);    font-weight: 500; }
    .td-exit  { color: var(--yellow); font-weight: 500; }

    /* â”€â”€ Summary chips â”€â”€ */
    .summary {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 12px;
      margin-bottom: 20px;
    }
    .chip {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 14px 16px;
    }
    .chip .chip-label { font-size: 0.7rem; color: var(--muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.6px; margin-bottom: 4px; }
    .chip .chip-val   { font-size: 1.15rem; font-weight: 700; color: var(--text); }
    .chip .chip-val.green { color: var(--green); }
    .chip .chip-val.red   { color: var(--red); }
    .chip .chip-val.yellow{ color: var(--yellow); }

    /* â”€â”€ Error msg â”€â”€ */
    .error-msg {
      color: var(--red);
      font-size: 0.85rem;
      margin-top: 6px;
      display: none;
    }
    .error-msg.show { display: block; }

    /* â”€â”€ Fade-in â”€â”€ */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(12px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .fadein { animation: fadeUp .3s ease both; }

    /* â”€â”€ Footer â”€â”€ */
    footer {
      text-align: center;
      margin-top: 48px;
      padding: 24px 16px;
      border-top: 1px solid var(--border);
      color: var(--muted);
      font-size: 0.78rem;
      line-height: 1.8;
    }
    footer a {
      color: var(--accent2);
      text-decoration: none;
      font-weight: 500;
      transition: color var(--tr);
    }
    footer a:hover { color: #fff; }
    footer .footer-name {
      font-weight: 600;
      color: var(--text);
      font-size: 0.85rem;
    }
    footer .footer-sep {
      margin: 0 8px;
      opacity: .35;
    }
  </style>
</head>
<body>

  <header>
    <h1>ğŸ“Š Lot Calculator</h1>
    <p>Calculate quantities, costs &amp; loss exit points instantly</p>
  </header>

  <!-- INPUT CARD -->
  <div class="card">
    <div class="form-grid">

      <!-- Amount -->
      <div class="field">
        <label for="investment">ğŸ’° Amount (â‚¹)</label>
        <input type="number" id="investment" placeholder="e.g. 100000" min="0" step="any" />
      </div>

      <!-- Price -->
      <div class="field">
        <label for="price">ğŸ“ˆ Current Price (â‚¹)</label>
        <input type="number" id="price" placeholder="e.g. 250" min="0" step="any" />
      </div>

      <!-- Loss % -->
      <div class="field">
        <label for="lossPercent">ğŸ”» Loss % (exit trigger)</label>
        <input type="number" id="lossPercent" placeholder="Default: 10" min="0" max="100" step="any" value="10" />
      </div>

      <!-- Custom lots -->
      <div class="field">
        <label for="customLots">â• Custom Lots (comma-separated)</label>
        <input type="text" id="customLots" placeholder="e.g. 100, 200, 500" />
      </div>

      <!-- Lot size toggles -->
      <div class="field full">
        <label>ğŸ“¦ Default Lot Sizes</label>
        <div class="lot-group">
          <label class="lot-chip">
            <input type="checkbox" value="25"  id="lot25"  checked /> 25
          </label>
          <label class="lot-chip">
            <input type="checkbox" value="30"  id="lot30"  checked /> 30
          </label>
          <label class="lot-chip">
            <input type="checkbox" value="50"  id="lot50"  checked /> 50
          </label>
          <label class="lot-chip">
            <input type="checkbox" value="75"  id="lot75"  checked /> 75
          </label>
        </div>
      </div>

    </div>

    <p class="error-msg" id="errMsg">âš ï¸ Please enter valid positive values for Amount and Price.</p>

    <br />
    <button class="btn" onclick="calculate()" id="calcBtn">Calculate</button>
  </div>

  <!-- RESULTS -->
  <div id="results"></div>

  <footer>Lot Calculator &mdash; built for speed &amp; clarity</footer>

  <script>
    // â”€â”€ Enter key shortcut â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.addEventListener('keydown', e => {
      if (e.key === 'Enter') calculate();
    });

    // â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const fmt  = n => n.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    const fmtN = n => n.toLocaleString('en-IN');

    function parseCustomLots(raw) {
      if (!raw.trim()) return [];
      return raw.split(',')
        .map(s => parseInt(s.trim(), 10))
        .filter(n => !isNaN(n) && n > 0);
    }

    function getCheckedLots() {
      return ['25','30','50','75']
        .filter(v => document.getElementById('lot' + v).checked)
        .map(Number);
    }

    // â”€â”€ Main calculation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function calculate() {
      const errEl = document.getElementById('errMsg');
      const investment = parseFloat(document.getElementById('investment').value);
      const price      = parseFloat(document.getElementById('price').value);
      const lossPct    = parseFloat(document.getElementById('lossPercent').value) || 10;
      const customRaw  = document.getElementById('customLots').value;

      if (isNaN(investment) || isNaN(price) || investment <= 0 || price <= 0) {
        errEl.classList.add('show');
        return;
      }
      errEl.classList.remove('show');

      const checkedLots = getCheckedLots();
      const customLots  = parseCustomLots(customRaw);
      const allLots     = [...new Set([...checkedLots, ...customLots])].sort((a, b) => a - b);

      // Max qty without lot constraint
      const maxQty  = Math.floor(investment / price);
      const totalMaxCost = maxQty * price;
      const lossAmt = investment * (lossPct / 100);
      const exitPrice = price * (1 - lossPct / 100);

      // Build rows
      const rows = allLots.map(lot => {
        const qty      = Math.floor(investment / price / lot) * lot;
        const cost     = qty * price;
        const lossAmt  = cost * (lossPct / 100);
        const lossExit = price * (1 - lossPct / 100);
        return { lot, qty, cost, lossAmt, lossExit };
      });

      // â”€â”€ Render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      const resultsEl = document.getElementById('results');

      const summaryHTML = `
        <div class="summary fadein">
          <div class="chip">
            <div class="chip-label">Max Qty</div>
            <div class="chip-val yellow">${fmtN(maxQty)}</div>
          </div>
          <div class="chip">
            <div class="chip-label">Price / Share</div>
            <div class="chip-val">â‚¹${fmt(price)}</div>
          </div>
          <div class="chip">
            <div class="chip-label">Loss % Set</div>
            <div class="chip-val red">${lossPct}%</div>
          </div>
          <div class="chip">
            <div class="chip-label">Exit Price</div>
            <div class="chip-val red">â‚¹${fmt(exitPrice)}</div>
          </div>
          <div class="chip">
            <div class="chip-label">Loss Amount</div>
            <div class="chip-val red">â‚¹${fmt(lossAmt)}</div>
          </div>
          <div class="chip">
            <div class="chip-label">Total Amount</div>
            <div class="chip-val green">â‚¹${fmt(investment)}</div>
          </div>
        </div>`;

      const tableRows = rows.map(r => `
        <tr>
          <td class="td-lot">${fmtN(r.lot)}</td>
          <td class="td-qty">${fmtN(r.qty)}</td>
          <td class="td-cost">â‚¹${fmt(r.cost)}</td>
          <td class="td-loss">â‚¹${fmt(r.lossAmt)}</td>
          <td class="td-exit">â‚¹${fmt(r.lossExit)}</td>
        </tr>`).join('');

      resultsEl.innerHTML = summaryHTML + `
        <div class="card fadein" style="padding:20px 0 0;">
          <div class="section-title" style="padding:0 20px 12px;">Lot Breakdown</div>
          <div class="results-table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Lot Size</th>
                  <th>Qty (lots Ã— size)</th>
                  <th>Total Cost</th>
                  <th>Loss Amount (âˆ’${lossPct}%)</th>
                  <th>Exit Price (âˆ’${lossPct}%)</th>
                </tr>
              </thead>
              <tbody>${tableRows || '<tr><td colspan="5" style="text-align:center;color:var(--muted);padding:20px">No lot sizes selected.</td></tr>'}</tbody>
            </table>
          </div>
        </div>`;
    }
  </script>

  <!-- FOOTER -->
  <footer>
    <div>
      <span class="footer-name">Prashant Savadi</span>
      <span class="footer-sep">|</span>
      <a href="https://www.linkedin.com/in/prashant-savadi" target="_blank" rel="noopener noreferrer">
        ğŸ”— linkedin.com/in/prashant-savadi
      </a>
    </div>
    <div style="margin-top:6px;">
      &copy; 2026 Lot Calculator &mdash; For individual developer use only.
    </div>
  </footer>

</body>
</html>